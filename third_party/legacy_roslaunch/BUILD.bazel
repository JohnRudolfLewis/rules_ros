load("@rules_python//python:defs.bzl", "py_binary", "py_library")
load("//build_tools:pylint.bzl", "pylint")
load("@rules_ros_pip_deps//:requirements.bzl", "requirement")

py_library(
    name = "legacy_roslaunch",
    srcs = glob(["*.py"]),
    visibility = ["//visibility:public"],
    deps = [
        "//:py_roslib_slim",
        "@ros_comm//:rosmaster",
        "@ros_comm//:rosparam",
        "@ros_comm_msgs//:py_rosgraph_msgs",
        "@ros_ros//:rosclean",
        requirement("paramiko"),
        requirement("pyyaml"),
        requirement("rospkg"),
    ],
)

exports_files([
    "roscore.xml",
])

py_binary(
    name = "roscore",
    srcs = ["main.py"],
    args = ["--core"],
    data = ["@ros_comm//:rosmaster"],
    main = "main.py",
    visibility = ["//visibility:public"],
    deps = [":legacy_roslaunch"],
)

pylint()
